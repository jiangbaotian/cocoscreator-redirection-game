require=function c(a,r,n){function d(e,t){if(!r[e]){if(!a[e]){var o="function"==typeof require&&require;if(!t&&o)return o(e,!0);if(h)return h(e,!0);var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}var s=r[e]={exports:{}};a[e][0].call(s.exports,function(t){return d(a[e][1][t]||t)},s,s.exports,c,a,r,n)}return r[e].exports}for(var h="function"==typeof require&&require,t=0;t<n.length;t++)d(n[t]);return d}({commonHandler:[function(t,e,o){"use strict";cc._RF.push(e,"4049ae1uflFCqD3y/plviuZ","commonHandler");var i={isSound:!0,maxScore:0,getScale:function(){var t=cc.sys.windowPixelResolution;return t.width/t.height/.5633},setSoundStatus:function(t){t?cc.sys.localStorage.setItem("isSound","on"):cc.sys.localStorage.setItem("isSound","off"),this.isSound=t},getSoundStatus:function(){return this.isSound},getMaxScore:function(){return this.maxScore},setMaxScore:function(t){this.maxScore=t,cc.sys.localStorage.setItem("watermaxScore",t),this.submitScore(t)},setInitValue:function(){var t=cc.sys.localStorage.getItem("isSound");"on"==t?this.isSound=!0:"off"==t&&(this.isSound=!1),this.maxScore=parseInt(cc.sys.localStorage.getItem("watermaxScore"))},shareAppMessage:function(t,e){null!=window.wx&&(console.log("share function"),window.wx.shareAppMessage({title:t,imageUrl:"res/raw-assets/resources/images/"+e,query:"from=group"}))},submitScore:function(t){null!=window.wx?window.wx.postMessage({messageType:"sendScore",score:t}):cc.log("fail: x_total : "+t)},rankList:function(){null!=window.wx?window.wx.postMessage({messageType:"rankList"}):cc.log("fail rank list:")},groupRankList:function(){null!=window.wx&&window.wx.shareAppMessage({success:function(t){null!=t.shareTickets&&0<t.shareTickets.length&&(console.log(t.shareTicket),window.wx.postMessage({messageType:"groupList",shareTicket:t.shareTickets[0]}))}})}};e.exports=i,cc._RF.pop()},{}],gameOver:[function(t,e,o){"use strict";cc._RF.push(e,"382c49j/05E34HHTEh2zKJo","gameOver");var i=t("commonHandler");cc.Class({extends:cc.Component,properties:{startNode:cc.Node,rankViewNode:cc.Node,againBtn:cc.Node,rankBtn:cc.Node,restartBtn:cc.Node,shareBtn:cc.Node,maxScoreLabel:cc.Label,scoreLabel:cc.Label},start:function(){this.rankBtn.on("touchstart",function(){this.rankViewNode.active=!0},this),this.restartBtn.on("touchstart",function(){this.node.active=!1},this),this.shareBtn.on("touchstart",function(){i.shareAppMessage("Redirection","redirection.jpg")},this),this.againBtn.on("touchstart",function(){this.node.active=!1},this),this.node.on("touchstart",function(){},this)},setScore:function(t){var e=i.getMaxScore();e<t&&(e=t,i.setMaxScore(t)),this.maxScoreLabel.string="Best Score "+e,this.scoreLabel.string=t}}),cc._RF.pop()},{commonHandler:"commonHandler"}],game:[function(t,e,o){"use strict";cc._RF.push(e,"a2362CWaGFI+6EMgLMht/cQ","game");var c=t("commonHandler");cc.Class({extends:cc.Component,properties:{scoreLable:cc.Label,soundBtn:cc.Node,gameOverNode:cc.Node,gameNode:cc.Node,click_pad:cc.Node,horizontal_roadNode:cc.Node,vertical_roadNode:cc.Node,carNode:cc.Node,gasNode:cc.Node,bubble:cc.Prefab},onLoad:function(){this.score=0,this.isGameOver=!1,this.soundOnTexture=cc.textureCache.addImage(cc.url.raw("resources/images/app/set/sound.png")),this.soundOffTexture=cc.textureCache.addImage(cc.url.raw("resources/images/app/set/mute.png")),this.backround1Texture=cc.textureCache.addImage(cc.url.raw("resources/images/game/background1.png")),this.backround2Texture=cc.textureCache.addImage(cc.url.raw("resources/images/game/background2.png")),this.first_time=!0,this.delta_backround=0,this.delta_car=0,this.direction=0,this.horizontal_road_x=0,this.horizontal_road_y=-420,this.vertical_road_x=0,this.vertical_road_y=71,this.horizontal_roadNode.setPosition(this.horizontal_road_x,this.horizontal_road_y),this.vertical_roadNode.setPosition(this.vertical_road_x,this.vertical_road_y),this.roadpos_x=0,this.roadpos_y=0,this.carNode.rotation=90,this.carNode.setPosition(cc.p(0,-420)),this.carNode.scale=.8,this.car_direction=1,this.gasNode.scaleX=.1,this.gasNode.scaleY=.2},update:function(t){this.changeBackground(t),this.isGameOver||this.moveCar(t)},moveCar:function(t){this.delta_car+=t;var e;e=2*Math.ceil(this.score/5);var o=0,i=0;0==this.direction&&(this.carNode.x>=this.horizontal_roadNode.x+420-87&&(this.carNode.rotation=270,this.car_direction=-1),this.carNode.x<=this.horizontal_roadNode.x-420+87&&(this.carNode.rotation=90,this.car_direction=1),-1==this.car_direction?(o=-13-e,i=-117):(o=13+e,i=117),this.carNode.setPosition(this.carNode.x+o,this.carNode.y),this.gasNode.setPosition(this.carNode.x-i,this.carNode.y),1==this.gasNode.active?this.gasNode.active=!1:this.gameNode.active=!0),1==this.direction&&(this.carNode.y>=this.vertical_roadNode.y+420-87&&(this.carNode.rotation=180,this.car_direction=-1),this.carNode.y<=this.vertical_roadNode.y-420+87&&(this.carNode.rotation=0,this.car_direction=1),-1==this.car_direction?(o=-13-e,i=-117):(o=13+e,i=117),this.carNode.setPosition(this.carNode.x,this.carNode.y+o),this.gasNode.setPosition(this.carNode.x,this.carNode.y-i)),this.delta_car<.1?this.gasNode.active=!1:(this.delta_car=0,this.gasNode.active=!0)},changeBackground:function(t){this.delta_backround+=t,this.delta_backround<.5&&(this.gameNode.getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(this.backround1Texture)),.5<this.delta_backround&&this.delta_backround<1&&(this.gameNode.getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(this.backround2Texture)),1<this.delta_backround&&(this.delta_backround=0)},createPosition:function(){var t=Math.random()-.5;return 1==this.direction?(this.roadpos_y=this.horizontal_roadNode.y+420+71,0==t&&(this.roadpos_x=this.horizontal_roadNode.x),0<t&&(this.roadpos_x=Math.ceil(840*t+this.horizontal_roadNode.x-71)),t<0&&(this.roadpos_x=Math.ceil(840*t+this.horizontal_roadNode.x+71))):(this.roadpos_x=this.vertical_roadNode.x+420+71,0==t&&(this.roadpos_y=this.vertical_roadNode.y),0<t&&(this.roadpos_y=Math.ceil(840*t+this.vertical_roadNode.y-71)),t<0&&(this.roadpos_y=Math.ceil(840*t+this.vertical_roadNode.y+71))),cc.p(this.roadpos_x,this.roadpos_y)},start:function(){this.click_pad.on("touchstart",function(){var t,e=0,o=0,i=0,s=0;1==this.direction?50<Math.abs(this.carNode.y-this.horizontal_roadNode.y)?(this.isGameOver=!0,c.getSoundStatus()&&cc.audioEngine.play(cc.url.raw("resources/sounds/wrong.mp3"),!1,1),(t=cc.instantiate(this.bubble)).setPosition(this.carNode.x+71+50,this.carNode.y),t.parent=this.node,t.scale=.3,t.rotation=90,t.runAction(cc.sequence(cc.scaleTo(.5,.5),cc.removeSelf())),this.carNode.runAction(cc.moveBy(.5,171,0)),this.carNode.runAction(cc.rotateBy(.5,180)),this.carNode.runAction(cc.sequence(cc.scaleTo(.5,.1),cc.callFunc(this.gameOver,this)))):(c.getSoundStatus()&&cc.audioEngine.play(cc.url.raw("resources/sounds/right.mp3"),!1,1),this.score++,this.scoreLable.string=this.score,i=this.vertical_roadNode.x,s=this.vertical_roadNode.y,this.vertical_roadNode.setPosition(this.createPosition()),e=this.horizontal_roadNode.x-i,o=this.horizontal_roadNode.y-s,this.carNode.setPosition(cc.p(i+71+87,this.horizontal_roadNode.y)),this.carNode.rotation=90,this.car_direction=1,this.horizontal_roadNode.runAction(cc.moveTo(.5,i,s)),this.vertical_roadNode.runAction(cc.moveTo(.5,this.vertical_roadNode.x-e,this.vertical_roadNode.y-o)),this.carNode.runAction(cc.moveTo(.5,this.carNode.x-e,this.carNode.y-o))):50<Math.abs(this.carNode.x-this.vertical_roadNode.x)?(c.getSoundStatus()&&cc.audioEngine.play(cc.url.raw("resources/sounds/wrong.mp3"),!1,1),this.isGameOver=!0,(t=cc.instantiate(this.bubble)).setPosition(this.carNode.x,this.carNode.y+71+50),t.parent=this.node,t.scale=.3,t.runAction(cc.sequence(cc.scaleTo(.5,.5),cc.removeSelf())),this.carNode.runAction(cc.moveBy(.5,0,171)),this.carNode.runAction(cc.rotateBy(.5,180)),this.carNode.runAction(cc.sequence(cc.scaleTo(.5,.1),cc.callFunc(this.gameOver,this)))):(c.getSoundStatus()&&cc.audioEngine.play(cc.url.raw("resources/sounds/right.mp3"),!1,1),this.score++,this.scoreLable.string=this.score,i=this.horizontal_roadNode.x,s=this.horizontal_roadNode.y,this.horizontal_roadNode.setPosition(this.createPosition()),e=this.vertical_roadNode.x-i,o=this.vertical_roadNode.y-s,this.carNode.setPosition(cc.p(this.vertical_roadNode.x,s+71+87)),this.carNode.rotation=0,this.car_direction=1,this.first_time?this.first_time=!1:(this.horizontal_roadNode.runAction(cc.moveTo(.5,this.horizontal_roadNode.x-e,this.horizontal_roadNode.y-o)),this.vertical_roadNode.runAction(cc.moveTo(.5,i,s)),this.carNode.runAction(cc.moveTo(.5,this.carNode.x-e,this.carNode.y-o))));0==this.direction?this.direction=1:1==this.direction&&(this.direction=0)},this),this.isloadSoundOn=!0,c.getSoundStatus()?(cc.audioEngine.play(cc.url.raw("resources/sounds/HappyLevel.mp3"),!0,1),this.isloadSoundOn=!1):this.soundBtn.getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(this.soundOffTexture),this.soundBtn.on("touchstart",function(){var t=c.getSoundStatus();t=!t,this.isloadSoundOn&&(this.isloadSoundOn=!1,cc.audioEngine.play(cc.url.raw("resources/sounds/HappyLevel.mp3"),!0,1)),t?(this.soundBtn.getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(this.soundOnTexture),cc.audioEngine.resumeAll()):(this.soundBtn.getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(this.soundOffTexture),cc.audioEngine.pauseAll()),c.setSoundStatus(t)},this),this.node.on("touchstart",function(){},this)},init:function(){this.score=0,this.isGameOver=!1,this.scoreLable.string=this.score,this.isComplex=!1,this.first_time=!0,this.delta_backround=0,this.delta_car=0,this.direction=0,this.horizontal_road_x=0,this.horizontal_road_y=-420,this.vertical_road_x=0,this.vertical_road_y=71,this.horizontal_roadNode.setPosition(this.horizontal_road_x,this.horizontal_road_y),this.vertical_roadNode.setPosition(this.vertical_road_x,this.vertical_road_y),this.roadpos_x=0,this.roadpos_y=0,this.carNode.rotation=90,this.carNode.setPosition(cc.p(0,-420)),this.carNode.scale=.8,this.car_direction=1,c.getSoundStatus()&&(cc.audioEngine.pauseAll(),cc.audioEngine.play(cc.url.raw("resources/sounds/HappyLevel.mp3"),!0,1))},runTimeAction:function(){this.timeNode.scale=1,this.timeNode.stopAllActions();var t=cc.scaleTo(3,0,1);this.timeNode.runAction(cc.sequence(t,cc.callFunc(this.gameOver,this)))},gameOver:function(){this.node.active=!1,this.gameOverNode.active=!0,this.gameOverNode.getComponent("gameOver").setScore(this.score)}}),cc._RF.pop()},{commonHandler:"commonHandler"}],rankView:[function(t,e,o){"use strict";cc._RF.push(e,"7172emXufFBzoHNFr4tYmId","rankView");var i=t("commonHandler");cc.Class({extends:cc.Component,properties:{subCanvas:{default:null,type:cc.Sprite},backBtn:{default:null,type:cc.Node}},onLoad:function(){},start:function(){null!=window.wx&&(window.wx.showShareMenu({withShareTicket:!0}),this.tex=new cc.Texture2D,window.sharedCanvas.width=1080,window.sharedCanvas.height=1920),this.backBtn.on("touchstart",function(){this.node.active=!1},this),this.node.on("touchstart",function(){})},_updateSubCanvas:function(){null!=window.sharedCanvas&&this.tex&&(this.tex.initWithElement(window.sharedCanvas),this.tex.handleLoadedTexture(),this.subCanvas.spriteFrame=new cc.SpriteFrame(this.tex))},update:function(){this._updateSubCanvas()},onEnable:function(){i.rankList()}}),cc._RF.pop()},{commonHandler:"commonHandler"}],scaleX:[function(t,e,o){"use strict";cc._RF.push(e,"7e551hoVjJNIJzT4KM6NZm7","scaleX"),cc.Class({extends:cc.Component,properties:{scaleType:1},onLoad:function(){var t=cc.sys.windowPixelResolution,e=void 0;e=-1==this.scaleType?t.height/t.width/1.775:t.width/t.height/.5633,this.node.scaleX=e},start:function(){}}),cc._RF.pop()},{}],scaleY:[function(t,e,o){"use strict";cc._RF.push(e,"1cd8ccpPJdDvKe1ryS37KdG","scaleY"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){var t=cc.sys.windowPixelResolution,e=t.width/t.height*1.775;this.node.scaleY=e},start:function(){}}),cc._RF.pop()},{}],start:[function(t,e,o){"use strict";cc._RF.push(e,"292bdKkq3hGa68pZj2eqRHm","start");var i=t("commonHandler");cc.Class({extends:cc.Component,properties:{gameNode:cc.Node,startBtn:cc.Node},start:function(){this.gameStorageCheck("watermaxScore",0),this.gameStorageCheck("isSound","on"),this.node.on("gameStart",function(){this.gameNode.active=!0,this.gameNode.getComponent("game").init()},this),this.startBtn.on("touchstart",function(){this.node.emit("gameStart")},this),i.setInitValue()},gameStorageCheck:function(t,e){var o=cc.sys.localStorage,i=o.getItem(t);""!=i&&null!=i||o.setItem(t,e)}}),cc._RF.pop()},{commonHandler:"commonHandler"}],zoomAnimBtn:[function(t,e,o){"use strict";cc._RF.push(e,"ebc2bQjkRNDeLDyrBxpBZfa","zoomAnimBtn"),cc.Class({extends:cc.Component,properties:{duration:1,scale:.9},onLoad:function(){this.vibrateShape()},start:function(){},update:function(t){},vibrateShape:function(){var t=cc.scaleTo(this.duration,this.scale),e=cc.scaleTo(this.duration,1),o=cc.sequence(t,e),i=cc.repeatForever(o);this.node.runAction(i)}}),cc._RF.pop()},{}],zoomBtn:[function(t,e,o){"use strict";cc._RF.push(e,"516dc72lntAabZIS7E3yqGc","zoomBtn"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){},start:function(){this.node.on("touchstart",function(){this.startZoom()},this)},startZoom:function(){this.node.pauseSystemEvents(!0);var t=cc.scaleTo(.1,.8,.8).easing(cc.easeCubicActionOut()),e=cc.scaleTo(.1,1).easing(cc.easeCubicActionOut()),o=cc.sequence(t,e,cc.callFunc(this.endZoom,this));this.node.runAction(o)},endZoom:function(){this.node.resumeSystemEvents(!0),this.node.dispatchEvent(new cc.Event.EventCustom("btnClicked",!0))}}),cc._RF.pop()},{}]},{},["commonHandler","game","gameOver","scaleX","scaleY","zoomAnimBtn","zoomBtn","rankView","start"]);
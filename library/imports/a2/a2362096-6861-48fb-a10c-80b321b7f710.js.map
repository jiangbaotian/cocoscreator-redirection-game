{"version":3,"sources":["..\\..\\..\\..\\assets\\script/assets\\script\\game.js"],"names":["CHD","require","cc","Class","extends","Component","properties","scoreLable","Label","soundBtn","Node","gameOverNode","gameNode","click_pad","horizontal_roadNode","vertical_roadNode","carNode","gasNode","bubble","Prefab","onLoad","score","isGameOver","soundOnTexture","textureCache","addImage","url","raw","soundOffTexture","backround1Texture","backround2Texture","first_time","delta_backround","delta_car","direction","horizontal_road_x","horizontal_road_y","vertical_road_x","vertical_road_y","setPosition","roadpos_x","roadpos_y","rotation","p","scale","car_direction","scaleX","scaleY","update","dt","changeBackground","moveCar","speed_ratio","Math","ceil","move_offset","gas_move_offset","x","y","active","getComponent","Sprite","spriteFrame","SpriteFrame","createPosition","random_decimal","random","start","on","offset_x","offset_y","dest_x","dest_y","abs","getSoundStatus","audioEngine","play","instantiate","parent","node","runAction","sequence","scaleTo","removeSelf","moveBy","rotateBy","callFunc","gameOver","string","moveTo","isloadSoundOn","isSound","resumeAll","pauseAll","setSoundStatus","init","isComplex","runTimeAction","timeNode","stopAllActions","s","setScore"],"mappings":";;;;;;AAAA,IAAIA,MAAMC,QAAQ,eAAR,CAAV;AACAC,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACR;;AAEAC,oBAAYL,GAAGM,KAHP;AAIRC,kBAAUP,GAAGQ,IAJL;AAKRC,sBAAcT,GAAGQ,IALT;;AAOR;AACAE,kBAAUV,GAAGQ,IARL;AASRG,mBAAWX,GAAGQ,IATN;AAURI,6BAAqBZ,GAAGQ,IAVhB;AAWRK,2BAAmBb,GAAGQ,IAXd;AAYRM,iBAASd,GAAGQ,IAZJ;AAaRO,iBAASf,GAAGQ,IAbJ;;AAeRQ,gBAAQhB,GAAGiB;;AAfH,KAHP;;AAuBL;;AAEAC,UAzBK,oBAyBK;AACN,aAAKC,KAAL,GAAa,CAAb;AACA,aAAKC,UAAL,GAAkB,KAAlB;AACA,aAAKC,cAAL,GAAsBrB,GAAGsB,YAAH,CAAgBC,QAAhB,CAAyBvB,GAAGwB,GAAH,CAAOC,GAAP,CAAW,oCAAX,CAAzB,CAAtB;AACA,aAAKC,eAAL,GAAuB1B,GAAGsB,YAAH,CAAgBC,QAAhB,CAAyBvB,GAAGwB,GAAH,CAAOC,GAAP,CAAW,mCAAX,CAAzB,CAAvB;;AAEA,aAAKE,iBAAL,GAAyB3B,GAAGsB,YAAH,CAAgBC,QAAhB,CAAyBvB,GAAGwB,GAAH,CAAOC,GAAP,CAAW,uCAAX,CAAzB,CAAzB;AACA,aAAKG,iBAAL,GAAyB5B,GAAGsB,YAAH,CAAgBC,QAAhB,CAAyBvB,GAAGwB,GAAH,CAAOC,GAAP,CAAW,uCAAX,CAAzB,CAAzB;;AAEA;;AAEA,aAAKI,UAAL,GAAkB,IAAlB;;AAEA,aAAKC,eAAL,GAAuB,CAAvB;AACA,aAAKC,SAAL,GAAiB,CAAjB;AACA,aAAKC,SAAL,GAAiB,CAAjB,CAfM,CAegB;AACtB,aAAKC,iBAAL,GAAyB,CAAzB;AACA,aAAKC,iBAAL,GAAyB,CAAC,GAA1B,EACA,KAAKC,eAAL,GAAuB,CADvB;AAEA,aAAKC,eAAL,GAAuB,EAAvB;;AAEA,aAAKxB,mBAAL,CAAyByB,WAAzB,CAAqC,KAAKJ,iBAA1C,EAA6D,KAAKC,iBAAlE;AACA,aAAKrB,iBAAL,CAAuBwB,WAAvB,CAAmC,KAAKF,eAAxC,EAAyD,KAAKC,eAA9D;;AAEA,aAAKE,SAAL,GAAiB,CAAjB;AACA,aAAKC,SAAL,GAAiB,CAAjB;;AAEA,aAAKzB,OAAL,CAAa0B,QAAb,GAAwB,EAAxB;AACA,aAAK1B,OAAL,CAAauB,WAAb,CAAyBrC,GAAGyC,CAAH,CAAK,CAAL,EAAQ,CAAC,GAAT,CAAzB;AACA,aAAK3B,OAAL,CAAa4B,KAAb,GAAqB,GAArB;;AAEA,aAAKC,aAAL,GAAqB,CAArB,CA/BM,CA+BiB;;AAEvB,aAAK5B,OAAL,CAAa6B,MAAb,GAAsB,GAAtB;AACA,aAAK7B,OAAL,CAAa8B,MAAb,GAAsB,GAAtB;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEH,KAvEI;AAyELC,UAzEK,kBAyEEC,EAzEF,EAyEM;AACP,aAAKC,gBAAL,CAAsBD,EAAtB;;AAEA,YAAG,CAAC,KAAK3B,UAAT,EACI,KAAK6B,OAAL,CAAaF,EAAb;AACP,KA9EI;AAgFLE,WAhFK,mBAgFGF,EAhFH,EAgFO;;AAER,aAAKhB,SAAL,IAAkBgB,EAAlB;;AAEA,YAAIG,cAAc,CAAlB;;AAEAA,sBAAcC,KAAKC,IAAL,CAAU,KAAKjC,KAAL,GAAa,CAAvB,IAA4B,CAA1C;AACA,YAAIkC,cAAc,CAAlB;AACA,YAAIC,kBAAkB,CAAtB;AACA,YAAG,KAAKtB,SAAL,IAAkB,CAArB,EAAwB;AACpB,gBAAG,KAAKlB,OAAL,CAAayC,CAAb,IAAmB,KAAK3C,mBAAL,CAAyB2C,CAAzB,GAA6B,GAA7B,GAAmC,EAAzD,EAA8D;AAC1D;AACA,qBAAKzC,OAAL,CAAa0B,QAAb,GAAwB,GAAxB;AACA,qBAAKG,aAAL,GAAqB,CAAC,CAAtB;AACH;AACD,gBAAG,KAAK7B,OAAL,CAAayC,CAAb,IAAmB,KAAK3C,mBAAL,CAAyB2C,CAAzB,GAA6B,GAA7B,GAAmC,EAAzD,EAA8D;AAC1D;AACA,qBAAKzC,OAAL,CAAa0B,QAAb,GAAwB,EAAxB;AACA,qBAAKG,aAAL,GAAqB,CAArB;AACH;AACD,gBAAG,KAAKA,aAAL,IAAsB,CAAC,CAA1B,EAA6B;AACzBU,8BAAc,CAAC,EAAD,GAAMH,WAApB;AACAI,kCAAkB,EAAE,KAAK,EAAP,CAAlB;AACH,aAHD,MAGO;AACHD,8BAAc,KAAKH,WAAnB;AACAI,kCAAkB,KAAK,EAAvB;AACH;AACD,iBAAKxC,OAAL,CAAauB,WAAb,CAAyB,KAAKvB,OAAL,CAAayC,CAAb,GAAiBF,WAA1C,EAAuD,KAAKvC,OAAL,CAAa0C,CAApE;AACA,iBAAKzC,OAAL,CAAasB,WAAb,CAAyB,KAAKvB,OAAL,CAAayC,CAAb,GAAiBD,eAA1C,EAA2D,KAAKxC,OAAL,CAAa0C,CAAxE;AACA,gBAAG,KAAKzC,OAAL,CAAa0C,MAAb,IAAuB,IAA1B,EACI,KAAK1C,OAAL,CAAa0C,MAAb,GAAsB,KAAtB,CADJ,KAEK,KAAK/C,QAAL,CAAc+C,MAAd,GAAuB,IAAvB;AAER;AACD,YAAG,KAAKzB,SAAL,IAAkB,CAArB,EAAwB;AACpB,gBAAG,KAAKlB,OAAL,CAAa0C,CAAb,IAAmB,KAAK3C,iBAAL,CAAuB2C,CAAvB,GAA2B,GAA3B,GAAiC,EAAvD,EAA4D;AACxD,qBAAK1C,OAAL,CAAa0B,QAAb,GAAwB,GAAxB;AACA,qBAAKG,aAAL,GAAqB,CAAC,CAAtB;AACH;AACD,gBAAG,KAAK7B,OAAL,CAAa0C,CAAb,IAAmB,KAAK3C,iBAAL,CAAuB2C,CAAvB,GAA2B,GAA3B,GAAiC,EAAvD,EAA4D;AACxD,qBAAK1C,OAAL,CAAa0B,QAAb,GAAwB,CAAxB;AACA,qBAAKG,aAAL,GAAqB,CAArB;AACH;AACD,gBAAG,KAAKA,aAAL,IAAsB,CAAC,CAA1B,EAA6B;AACzBU,8BAAc,CAAC,EAAD,GAAMH,WAApB;AACAI,kCAAkB,EAAE,KAAK,EAAP,CAAlB;AACH,aAHD,MAGO;AACHD,8BAAc,KAAKH,WAAnB;AACAI,kCAAkB,KAAK,EAAvB;AACH;AACD,iBAAKxC,OAAL,CAAauB,WAAb,CAAyB,KAAKvB,OAAL,CAAayC,CAAtC,EAAyC,KAAKzC,OAAL,CAAa0C,CAAb,GAAiBH,WAA1D;AACA,iBAAKtC,OAAL,CAAasB,WAAb,CAAyB,KAAKvB,OAAL,CAAayC,CAAtC,EAAyC,KAAKzC,OAAL,CAAa0C,CAAb,GAAiBF,eAA1D;AAEH;AACD,YAAG,KAAKvB,SAAL,GAAiB,GAApB,EACI,KAAKhB,OAAL,CAAa0C,MAAb,GAAsB,KAAtB,CADJ,KAEK;AACD,iBAAK1B,SAAL,GAAiB,CAAjB;AACA,iBAAKhB,OAAL,CAAa0C,MAAb,GAAsB,IAAtB;AACH;AAEJ,KA7II;AA+ILT,oBA/IK,4BA+IYD,EA/IZ,EA+IgB;AACjB,aAAKjB,eAAL,IAAwBiB,EAAxB;AACA,YAAG,KAAKjB,eAAL,GAAuB,GAA1B,EAA+B;AAC3B,iBAAKpB,QAAL,CAAcgD,YAAd,CAA2B1D,GAAG2D,MAA9B,EAAsCC,WAAtC,GAAoD,IAAI5D,GAAG6D,WAAP,CAAmB,KAAKlC,iBAAxB,CAApD;AACH;AACD,YAAI,KAAKG,eAAL,GAAuB,GAAxB,IAAiC,KAAKA,eAAL,GAAuB,CAA3D,EAA+D;AAC3D,iBAAKpB,QAAL,CAAcgD,YAAd,CAA2B1D,GAAG2D,MAA9B,EAAsCC,WAAtC,GAAoD,IAAI5D,GAAG6D,WAAP,CAAmB,KAAKjC,iBAAxB,CAApD;AACH;AACD,YAAG,KAAKE,eAAL,GAAuB,CAA1B,EAA6B;AACzB,iBAAKA,eAAL,GAAuB,CAAvB;AACH;AACJ,KA1JI;AA4JLgC,kBA5JK,4BA4JY;AACb,YAAIC,iBAAiBZ,KAAKa,MAAL,KAAgB,GAArC;AACA,YAAG,KAAKhC,SAAL,IAAkB,CAArB,EAAwB;AACpB,iBAAKO,SAAL,GAAiB,KAAK3B,mBAAL,CAAyB4C,CAAzB,GAA6B,GAA7B,GAAmC,EAApD;AACA,gBAAGO,kBAAkB,CAArB,EACI,KAAKzB,SAAL,GAAiB,KAAK1B,mBAAL,CAAyB2C,CAA1C;AACJ,gBAAGQ,iBAAiB,CAApB,EACI,KAAKzB,SAAL,GAAiBa,KAAKC,IAAL,CAAUW,iBAAiB,GAAjB,GAAuB,KAAKnD,mBAAL,CAAyB2C,CAAhD,GAAoD,EAA9D,CAAjB;AACJ,gBAAGQ,iBAAiB,CAApB,EACI,KAAKzB,SAAL,GAAiBa,KAAKC,IAAL,CAAUW,iBAAiB,GAAjB,GAAuB,KAAKnD,mBAAL,CAAyB2C,CAAhD,GAAoD,EAA9D,CAAjB;AAEP,SATD,MASO;AACH,iBAAKjB,SAAL,GAAiB,KAAKzB,iBAAL,CAAuB0C,CAAvB,GAA2B,GAA3B,GAAiC,EAAlD;AACA,gBAAGQ,kBAAkB,CAArB,EACI,KAAKxB,SAAL,GAAiB,KAAK1B,iBAAL,CAAuB2C,CAAxC;AACJ,gBAAGO,iBAAiB,CAApB,EACI,KAAKxB,SAAL,GAAiBY,KAAKC,IAAL,CAAUW,iBAAiB,GAAjB,GAAuB,KAAKlD,iBAAL,CAAuB2C,CAA9C,GAAkD,EAA5D,CAAjB;AACJ,gBAAGO,iBAAiB,CAApB,EACI,KAAKxB,SAAL,GAAiBY,KAAKC,IAAL,CAAUW,iBAAiB,GAAjB,GAAuB,KAAKlD,iBAAL,CAAuB2C,CAA9C,GAAkD,EAA5D,CAAjB;AAEP;;AAED,eAAOxD,GAAGyC,CAAH,CAAK,KAAKH,SAAV,EAAqB,KAAKC,SAA1B,CAAP;AACH,KAnLI;AAqLL0B,SArLK,mBAqLI;AACL,aAAKtD,SAAL,CAAeuD,EAAf,CAAkB,YAAlB,EAAgC,YAAW;;AAEvC,gBAAIC,WAAW,CAAf;AACA,gBAAIC,WAAW,CAAf;AACA,gBAAIC,SAAS,CAAb;AACA,gBAAIC,SAAS,CAAb;;AAEA,gBAAI,KAAKtC,SAAL,IAAkB,CAAtB,EAAyB;AAAC;;AAEtB,oBAAGmB,KAAKoB,GAAL,CAAS,KAAKzD,OAAL,CAAa0C,CAAb,GAAiB,KAAK5C,mBAAL,CAAyB4C,CAAnD,IAAwD,EAA3D,EAA+D;AAC3D,yBAAKpC,UAAL,GAAkB,IAAlB;AACA,wBAAItB,IAAI0E,cAAJ,EAAJ,EAA0B;AACtBxE,2BAAGyE,WAAH,CAAeC,IAAf,CAAoB1E,GAAGwB,GAAH,CAAOC,GAAP,CAAW,4BAAX,CAApB,EAA8D,KAA9D,EAAqE,CAArE;AACH;;AAED;;AAEA,wBAAIT,SAAShB,GAAG2E,WAAH,CAAe,KAAK3D,MAApB,CAAb;AACAA,2BAAOqB,WAAP,CAAmB,KAAKvB,OAAL,CAAayC,CAAb,GAAiB,EAAjB,GAAsB,EAAzC,EAA6C,KAAKzC,OAAL,CAAa0C,CAA1D;AACAxC,2BAAO4D,MAAP,GAAgB,KAAKC,IAArB;AACA7D,2BAAO0B,KAAP,GAAe,GAAf;AACA1B,2BAAOwB,QAAP,GAAkB,EAAlB;AACAxB,2BAAO8D,SAAP,CAAiB9E,GAAG+E,QAAH,CAAY/E,GAAGgF,OAAH,CAAW,GAAX,EAAgB,GAAhB,CAAZ,EAAkChF,GAAGiF,UAAH,EAAlC,CAAjB;;AAEA,yBAAKnE,OAAL,CAAagE,SAAb,CAAuB9E,GAAGkF,MAAH,CAAU,GAAV,EAAe,KAAK,GAApB,EAAyB,CAAzB,CAAvB;AACA,yBAAKpE,OAAL,CAAagE,SAAb,CAAuB9E,GAAGmF,QAAH,CAAY,GAAZ,EAAiB,GAAjB,CAAvB;AACA,yBAAKrE,OAAL,CAAagE,SAAb,CAAuB9E,GAAG+E,QAAH,CAAY/E,GAAGgF,OAAH,CAAW,GAAX,EAAgB,GAAhB,CAAZ,EAAkChF,GAAGoF,QAAH,CAAY,KAAKC,QAAjB,EAA2B,IAA3B,CAAlC,CAAvB;AACH,iBAlBD,MAkBO;AACH,wBAAIvF,IAAI0E,cAAJ,EAAJ,EAA0B;AACtBxE,2BAAGyE,WAAH,CAAeC,IAAf,CAAoB1E,GAAGwB,GAAH,CAAOC,GAAP,CAAW,4BAAX,CAApB,EAA8D,KAA9D,EAAqE,CAArE;AACH;;AAED,yBAAKN,KAAL;AACA,yBAAKd,UAAL,CAAgBiF,MAAhB,GAAyB,KAAKnE,KAA9B;;AAEAkD,6BAAS,KAAKxD,iBAAL,CAAuB0C,CAAhC;AACAe,6BAAS,KAAKzD,iBAAL,CAAuB2C,CAAhC;AACA,yBAAK3C,iBAAL,CAAuBwB,WAAvB,CAAmC,KAAKyB,cAAL,EAAnC;AACAK,+BAAW,KAAKvD,mBAAL,CAAyB2C,CAAzB,GAA6Bc,MAAxC;AACAD,+BAAW,KAAKxD,mBAAL,CAAyB4C,CAAzB,GAA6Bc,MAAxC;;AAEA,yBAAKxD,OAAL,CAAauB,WAAb,CAAyBrC,GAAGyC,CAAH,CAAK4B,SAAS,EAAT,GAAc,EAAnB,EAAuB,KAAKzD,mBAAL,CAAyB4C,CAAhD,CAAzB;AACA,yBAAK1C,OAAL,CAAa0B,QAAb,GAAwB,EAAxB;AACA,yBAAKG,aAAL,GAAqB,CAArB;;AAEA,yBAAK/B,mBAAL,CAAyBkE,SAAzB,CAAmC9E,GAAGuF,MAAH,CAAU,GAAV,EAAelB,MAAf,EAAuBC,MAAvB,CAAnC;AACA,yBAAKzD,iBAAL,CAAuBiE,SAAvB,CAAiC9E,GAAGuF,MAAH,CAAU,GAAV,EAAe,KAAK1E,iBAAL,CAAuB0C,CAAvB,GAA2BY,QAA1C,EAAoD,KAAKtD,iBAAL,CAAuB2C,CAAvB,GAA2BY,QAA/E,CAAjC;AACA,yBAAKtD,OAAL,CAAagE,SAAb,CAAuB9E,GAAGuF,MAAH,CAAU,GAAV,EAAe,KAAKzE,OAAL,CAAayC,CAAb,GAAiBY,QAAhC,EAA0C,KAAKrD,OAAL,CAAa0C,CAAb,GAAiBY,QAA3D,CAAvB;AACH;AAGJ,aA5CD,MA4CO;AAAC;;AAEJ,oBAAGjB,KAAKoB,GAAL,CAAS,KAAKzD,OAAL,CAAayC,CAAb,GAAiB,KAAK1C,iBAAL,CAAuB0C,CAAjD,IAAsD,EAAzD,EAA6D;AACzD,wBAAIzD,IAAI0E,cAAJ,EAAJ,EAA0B;AACtBxE,2BAAGyE,WAAH,CAAeC,IAAf,CAAoB1E,GAAGwB,GAAH,CAAOC,GAAP,CAAW,4BAAX,CAApB,EAA8D,KAA9D,EAAqE,CAArE;AACH;AACD,yBAAKL,UAAL,GAAkB,IAAlB;;AAEA;;AAEA,wBAAIJ,SAAShB,GAAG2E,WAAH,CAAe,KAAK3D,MAApB,CAAb;AACAA,2BAAOqB,WAAP,CAAmB,KAAKvB,OAAL,CAAayC,CAAhC,EAAmC,KAAKzC,OAAL,CAAa0C,CAAb,GAAiB,EAAjB,GAAsB,EAAzD;AACAxC,2BAAO4D,MAAP,GAAgB,KAAKC,IAArB;AACA7D,2BAAO0B,KAAP,GAAe,GAAf;AACA1B,2BAAO8D,SAAP,CAAiB9E,GAAG+E,QAAH,CAAY/E,GAAGgF,OAAH,CAAW,GAAX,EAAgB,GAAhB,CAAZ,EAAkChF,GAAGiF,UAAH,EAAlC,CAAjB;;AAEA,yBAAKnE,OAAL,CAAagE,SAAb,CAAuB9E,GAAGkF,MAAH,CAAU,GAAV,EAAe,CAAf,EAAkB,KAAK,GAAvB,CAAvB;AACA,yBAAKpE,OAAL,CAAagE,SAAb,CAAuB9E,GAAGmF,QAAH,CAAY,GAAZ,EAAiB,GAAjB,CAAvB;AACA,yBAAKrE,OAAL,CAAagE,SAAb,CAAuB9E,GAAG+E,QAAH,CAAY/E,GAAGgF,OAAH,CAAW,GAAX,EAAgB,GAAhB,CAAZ,EAAkChF,GAAGoF,QAAH,CAAY,KAAKC,QAAjB,EAA2B,IAA3B,CAAlC,CAAvB;AACH,iBAjBD,MAiBO;AACH,wBAAIvF,IAAI0E,cAAJ,EAAJ,EAA0B;AACtBxE,2BAAGyE,WAAH,CAAeC,IAAf,CAAoB1E,GAAGwB,GAAH,CAAOC,GAAP,CAAW,4BAAX,CAApB,EAA8D,KAA9D,EAAqE,CAArE;AACH;;AAED,yBAAKN,KAAL;AACA,yBAAKd,UAAL,CAAgBiF,MAAhB,GAAyB,KAAKnE,KAA9B;;AAEAkD,6BAAS,KAAKzD,mBAAL,CAAyB2C,CAAlC;AACAe,6BAAS,KAAK1D,mBAAL,CAAyB4C,CAAlC;AACA,yBAAK5C,mBAAL,CAAyByB,WAAzB,CAAqC,KAAKyB,cAAL,EAArC;AACAK,+BAAW,KAAKtD,iBAAL,CAAuB0C,CAAvB,GAA2Bc,MAAtC;AACAD,+BAAW,KAAKvD,iBAAL,CAAuB2C,CAAvB,GAA2Bc,MAAtC;;AAEA,yBAAKxD,OAAL,CAAauB,WAAb,CAAyBrC,GAAGyC,CAAH,CAAK,KAAK5B,iBAAL,CAAuB0C,CAA5B,EAA+Be,SAAS,EAAT,GAAc,EAA7C,CAAzB;AACA,yBAAKxD,OAAL,CAAa0B,QAAb,GAAwB,CAAxB;AACA,yBAAKG,aAAL,GAAqB,CAArB;AACA,wBAAG,KAAKd,UAAR,EAAoB;AAChB,6BAAKA,UAAL,GAAkB,KAAlB;AACH,qBAFD,MAEO;AACH,6BAAKjB,mBAAL,CAAyBkE,SAAzB,CAAmC9E,GAAGuF,MAAH,CAAU,GAAV,EAAe,KAAK3E,mBAAL,CAAyB2C,CAAzB,GAA6BY,QAA5C,EAAsD,KAAKvD,mBAAL,CAAyB4C,CAAzB,GAA6BY,QAAnF,CAAnC;AACA,6BAAKvD,iBAAL,CAAuBiE,SAAvB,CAAiC9E,GAAGuF,MAAH,CAAU,GAAV,EAAelB,MAAf,EAAuBC,MAAvB,CAAjC;AACA,6BAAKxD,OAAL,CAAagE,SAAb,CAAuB9E,GAAGuF,MAAH,CAAU,GAAV,EAAe,KAAKzE,OAAL,CAAayC,CAAb,GAAiBY,QAAhC,EAA0C,KAAKrD,OAAL,CAAa0C,CAAb,GAAiBY,QAA3D,CAAvB;AACH;AACJ;AAEJ;;AAGD,gBAAG,KAAKpC,SAAL,IAAkB,CAArB,EACI,KAAKA,SAAL,GAAiB,CAAjB,CADJ,KAEK,IAAG,KAAKA,SAAL,IAAkB,CAArB,EAAwB,KAAKA,SAAL,GAAiB,CAAjB;AAGhC,SAxGD,EAwGG,IAxGH,GA2GA,KAAKwD,aAAL,GAAqB,IA3GrB;AA4GA,YAAI,CAAC1F,IAAI0E,cAAJ,EAAL,EAA2B;AACvB,iBAAKjE,QAAL,CAAcmD,YAAd,CAA2B1D,GAAG2D,MAA9B,EAAsCC,WAAtC,GAAoD,IAAI5D,GAAG6D,WAAP,CAAmB,KAAKnC,eAAxB,CAApD;AACA;AACH,SAHD,MAGO;AACH1B,eAAGyE,WAAH,CAAeC,IAAf,CAAoB1E,GAAGwB,GAAH,CAAOC,GAAP,CAAW,iCAAX,CAApB,EAAmE,IAAnE,EAAyE,CAAzE;AACA,iBAAK+D,aAAL,GAAqB,KAArB;AACH;;AAED,aAAKjF,QAAL,CAAc2D,EAAd,CAAiB,YAAjB,EAA+B,YAAU;AACrC,gBAAIuB,UAAU3F,IAAI0E,cAAJ,EAAd;AACAiB,sBAAU,CAACA,OAAX;AACA,gBAAI,KAAKD,aAAT,EAAwB;AACpB,qBAAKA,aAAL,GAAqB,KAArB;AACAxF,mBAAGyE,WAAH,CAAeC,IAAf,CAAoB1E,GAAGwB,GAAH,CAAOC,GAAP,CAAW,iCAAX,CAApB,EAAmE,IAAnE,EAAyE,CAAzE;AACH;AACD,gBAAIgE,OAAJ,EAAa;AACT,qBAAKlF,QAAL,CAAcmD,YAAd,CAA2B1D,GAAG2D,MAA9B,EAAsCC,WAAtC,GAAoD,IAAI5D,GAAG6D,WAAP,CAAmB,KAAKxC,cAAxB,CAApD;AACArB,mBAAGyE,WAAH,CAAeiB,SAAf;AACH,aAHD,MAGO;AACH,qBAAKnF,QAAL,CAAcmD,YAAd,CAA2B1D,GAAG2D,MAA9B,EAAsCC,WAAtC,GAAoD,IAAI5D,GAAG6D,WAAP,CAAmB,KAAKnC,eAAxB,CAApD;AACA1B,mBAAGyE,WAAH,CAAekB,QAAf;AACH;AACD7F,gBAAI8F,cAAJ,CAAmBH,OAAnB;AACH,SAfD,EAeG,IAfH;;AAiBA,aAAKZ,IAAL,CAAUX,EAAV,CAAa,YAAb,EAA2B,YAAU,CAAE,CAAvC,EAAyC,IAAzC;AACH,KA5TI;AA8TL2B,QA9TK,kBA8TE;AACH,aAAK1E,KAAL,GAAa,CAAb;AACA,aAAKC,UAAL,GAAkB,KAAlB;AACA,aAAKf,UAAL,CAAgBiF,MAAhB,GAAyB,KAAKnE,KAA9B;AACA,aAAK2E,SAAL,GAAiB,KAAjB;;AAEA;AACA,aAAKjE,UAAL,GAAkB,IAAlB;;AAEA,aAAKC,eAAL,GAAuB,CAAvB;AACA,aAAKC,SAAL,GAAiB,CAAjB;AACA,aAAKC,SAAL,GAAiB,CAAjB,CAXG,CAWmB;AACtB,aAAKC,iBAAL,GAAyB,CAAzB;AACA,aAAKC,iBAAL,GAAyB,CAAC,GAA1B,EACA,KAAKC,eAAL,GAAuB,CADvB;AAEA,aAAKC,eAAL,GAAuB,EAAvB;;AAEA,aAAKxB,mBAAL,CAAyByB,WAAzB,CAAqC,KAAKJ,iBAA1C,EAA6D,KAAKC,iBAAlE;AACA,aAAKrB,iBAAL,CAAuBwB,WAAvB,CAAmC,KAAKF,eAAxC,EAAyD,KAAKC,eAA9D;;AAEA,aAAKE,SAAL,GAAiB,CAAjB;AACA,aAAKC,SAAL,GAAiB,CAAjB;;AAEA,aAAKzB,OAAL,CAAa0B,QAAb,GAAwB,EAAxB;AACA,aAAK1B,OAAL,CAAauB,WAAb,CAAyBrC,GAAGyC,CAAH,CAAK,CAAL,EAAQ,CAAC,GAAT,CAAzB;AACA,aAAK3B,OAAL,CAAa4B,KAAb,GAAqB,GAArB;;AAGA,aAAKC,aAAL,GAAqB,CAArB,CA5BG,CA4BoB;;AAEvB,YAAI7C,IAAI0E,cAAJ,EAAJ,EAA0B;AACtBxE,eAAGyE,WAAH,CAAekB,QAAf;AACA3F,eAAGyE,WAAH,CAAeC,IAAf,CAAoB1E,GAAGwB,GAAH,CAAOC,GAAP,CAAW,iCAAX,CAApB,EAAmE,IAAnE,EAAyE,CAAzE;AACH;AAEJ,KAjWI;AAmWLsE,iBAnWK,2BAmWW;AACZ,aAAKC,QAAL,CAActD,KAAd,GAAsB,CAAtB;AACA,aAAKsD,QAAL,CAAcC,cAAd;AACA,YAAIC,IAAIlG,GAAGgF,OAAH,CAAW,CAAX,EAAc,CAAd,EAAiB,CAAjB,CAAR;AACA,aAAKgB,QAAL,CAAclB,SAAd,CAAwB9E,GAAG+E,QAAH,CAAYmB,CAAZ,EAAelG,GAAGoF,QAAH,CAAY,KAAKC,QAAjB,EAA2B,IAA3B,CAAf,CAAxB;AACH,KAxWI;AA0WLA,YA1WK,sBA0WM;;AAEP,aAAKR,IAAL,CAAUpB,MAAV,GAAmB,KAAnB;AACA,aAAKhD,YAAL,CAAkBgD,MAAlB,GAA2B,IAA3B;AACA,aAAKhD,YAAL,CAAkBiD,YAAlB,CAA+B,UAA/B,EAA2CyC,QAA3C,CAAoD,KAAKhF,KAAzD;AACH;AA/WI,CAAT","file":"game.js","sourceRoot":"..\\..\\..\\..\\assets\\script","sourcesContent":["var CHD = require(\"commonHandler\");\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        // graphics_node: cc.Graphics,\r\n\r\n        scoreLable: cc.Label,\r\n        soundBtn: cc.Node, \r\n        gameOverNode: cc.Node,\r\n\r\n        ///////////////////////////////////////////\r\n        gameNode: cc.Node,\r\n        click_pad: cc.Node,\r\n        horizontal_roadNode: cc.Node,\r\n        vertical_roadNode: cc.Node,\r\n        carNode: cc.Node,\r\n        gasNode: cc.Node,\r\n\r\n        bubble: cc.Prefab,\r\n        \r\n        \r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad () {\r\n        this.score = 0;\r\n        this.isGameOver = false;\r\n        this.soundOnTexture = cc.textureCache.addImage(cc.url.raw(\"resources/images/app/set/sound.png\"));\r\n        this.soundOffTexture = cc.textureCache.addImage(cc.url.raw(\"resources/images/app/set/mute.png\"));\r\n\r\n        this.backround1Texture = cc.textureCache.addImage(cc.url.raw(\"resources/images/game/background1.png\"));\r\n        this.backround2Texture = cc.textureCache.addImage(cc.url.raw(\"resources/images/game/background2.png\"));\r\n\r\n        //////////////////////////////////////\r\n\r\n        this.first_time = true;\r\n\r\n        this.delta_backround = 0;\r\n        this.delta_car = 0;\r\n        this.direction = 0;   //0 : car moved in horizontal road, 1: car moved in vertical road\r\n        this.horizontal_road_x = 0;\r\n        this.horizontal_road_y = -420,\r\n        this.vertical_road_x = 0;\r\n        this.vertical_road_y = 71;\r\n\r\n        this.horizontal_roadNode.setPosition(this.horizontal_road_x, this.horizontal_road_y);\r\n        this.vertical_roadNode.setPosition(this.vertical_road_x, this.vertical_road_y);\r\n\r\n        this.roadpos_x = 0;\r\n        this.roadpos_y = 0;\r\n\r\n        this.carNode.rotation = 90;\r\n        this.carNode.setPosition(cc.p(0, -420));\r\n        this.carNode.scale = 0.8;\r\n\r\n        this.car_direction = 1;// 1: right, up side, -1: left, down side\r\n\r\n        this.gasNode.scaleX = 0.1;\r\n        this.gasNode.scaleY = 0.2;\r\n\r\n        // this.gas_circle = this.graphics_node;\r\n        \r\n        // this.gas_circle.clear();\r\n        // this.gas_circle.fillColor = cc.hexToColor('#ff9a8e');\r\n        // this.gas_circle.strokeColor = cc.hexToColor('#ff9a8e');\r\n        // this.gas_circle.circle(0, 0, 50);\r\n        // this.gas_circle.stroke();\r\n        // this.gas_circle.fill();\r\n        // this.gas_circle.close();\r\n\r\n    },\r\n\r\n    update(dt) {\r\n        this.changeBackground(dt);\r\n\r\n        if(!this.isGameOver)\r\n            this.moveCar(dt);\r\n    },\r\n\r\n    moveCar(dt) {\r\n\r\n        this.delta_car += dt;\r\n\r\n        var speed_ratio = 0;\r\n       \r\n        speed_ratio = Math.ceil(this.score / 5) * 2;\r\n        var move_offset = 0;\r\n        var gas_move_offset = 0;\r\n        if(this.direction == 0) {\r\n            if(this.carNode.x >= (this.horizontal_roadNode.x + 420 - 87)) {\r\n                // move_offset = -10;\r\n                this.carNode.rotation = 270;\r\n                this.car_direction = -1;\r\n            }\r\n            if(this.carNode.x <= (this.horizontal_roadNode.x - 420 + 87)) {\r\n                // move_offset = 10;\r\n                this.carNode.rotation = 90;\r\n                this.car_direction = 1\r\n            }\r\n            if(this.car_direction == -1) {\r\n                move_offset = -13 - speed_ratio;\r\n                gas_move_offset = -(30 + 87);\r\n            } else {\r\n                move_offset = 13 + speed_ratio;\r\n                gas_move_offset = 30 + 87;\r\n            }\r\n            this.carNode.setPosition(this.carNode.x + move_offset, this.carNode.y);\r\n            this.gasNode.setPosition(this.carNode.x - gas_move_offset, this.carNode.y);\r\n            if(this.gasNode.active == true)\r\n                this.gasNode.active = false;\r\n            else this.gameNode.active = true;\r\n            \r\n        }\r\n        if(this.direction == 1) {\r\n            if(this.carNode.y >= (this.vertical_roadNode.y + 420 - 87)) {\r\n                this.carNode.rotation = 180;\r\n                this.car_direction = -1;\r\n            }\r\n            if(this.carNode.y <= (this.vertical_roadNode.y - 420 + 87)) {\r\n                this.carNode.rotation = 0;\r\n                this.car_direction = 1;\r\n            }\r\n            if(this.car_direction == -1) {\r\n                move_offset = -13 - speed_ratio;\r\n                gas_move_offset = -(30 + 87);\r\n            } else {\r\n                move_offset = 13 + speed_ratio;\r\n                gas_move_offset = 30 + 87;\r\n            }\r\n            this.carNode.setPosition(this.carNode.x, this.carNode.y + move_offset);\r\n            this.gasNode.setPosition(this.carNode.x, this.carNode.y - gas_move_offset);\r\n\r\n        }\r\n        if(this.delta_car < 0.1)\r\n            this.gasNode.active = false;\r\n        else {\r\n            this.delta_car = 0;\r\n            this.gasNode.active = true;\r\n        }\r\n\r\n    },\r\n\r\n    changeBackground(dt) {\r\n        this.delta_backround += dt;\r\n        if(this.delta_backround < 0.5) {\r\n            this.gameNode.getComponent(cc.Sprite).spriteFrame = new cc.SpriteFrame(this.backround1Texture);\r\n        }\r\n        if((this.delta_backround > 0.5) && (this.delta_backround < 1)) {\r\n            this.gameNode.getComponent(cc.Sprite).spriteFrame = new cc.SpriteFrame(this.backround2Texture);\r\n        }\r\n        if(this.delta_backround > 1) {\r\n            this.delta_backround = 0;\r\n        }\r\n    },\r\n\r\n    createPosition() {\r\n        var random_decimal = Math.random() - 0.5;\r\n        if(this.direction == 1) {\r\n            this.roadpos_y = this.horizontal_roadNode.y + 420 + 71;\r\n            if(random_decimal == 0)\r\n                this.roadpos_x = this.horizontal_roadNode.x;\r\n            if(random_decimal > 0)\r\n                this.roadpos_x = Math.ceil(random_decimal * 840 + this.horizontal_roadNode.x - 71);\r\n            if(random_decimal < 0)\r\n                this.roadpos_x = Math.ceil(random_decimal * 840 + this.horizontal_roadNode.x + 71);\r\n            \r\n        } else {\r\n            this.roadpos_x = this.vertical_roadNode.x + 420 + 71;\r\n            if(random_decimal == 0)\r\n                this.roadpos_y = this.vertical_roadNode.y;\r\n            if(random_decimal > 0)\r\n                this.roadpos_y = Math.ceil(random_decimal * 840 + this.vertical_roadNode.y - 71);\r\n            if(random_decimal < 0)\r\n                this.roadpos_y = Math.ceil(random_decimal * 840 + this.vertical_roadNode.y + 71);\r\n\r\n        }\r\n        \r\n        return cc.p(this.roadpos_x, this.roadpos_y);\r\n    },\r\n\r\n    start () {\r\n        this.click_pad.on(\"touchstart\", function() {\r\n\r\n            var offset_x = 0;\r\n            var offset_y = 0;\r\n            var dest_x = 0;\r\n            var dest_y = 0;\r\n\r\n            if (this.direction == 1) {//vertical road\r\n\r\n                if(Math.abs(this.carNode.y - this.horizontal_roadNode.y) > 50) {\r\n                    this.isGameOver = true;\r\n                    if (CHD.getSoundStatus()) {\r\n                        cc.audioEngine.play(cc.url.raw('resources/sounds/wrong.mp3'), false, 1);\r\n                    }\r\n\r\n                    // this.carNode.stopAllActions();\r\n                    \r\n                    var bubble = cc.instantiate(this.bubble);\r\n                    bubble.setPosition(this.carNode.x + 71 + 50, this.carNode.y);\r\n                    bubble.parent = this.node;\r\n                    bubble.scale = 0.3;\r\n                    bubble.rotation = 90;\r\n                    bubble.runAction(cc.sequence(cc.scaleTo(0.5, 0.5), cc.removeSelf()));\r\n\r\n                    this.carNode.runAction(cc.moveBy(0.5, 71 + 100, 0));\r\n                    this.carNode.runAction(cc.rotateBy(0.5, 180));\r\n                    this.carNode.runAction(cc.sequence(cc.scaleTo(0.5, 0.1), cc.callFunc(this.gameOver, this)));\r\n                } else {\r\n                    if (CHD.getSoundStatus()) {\r\n                        cc.audioEngine.play(cc.url.raw('resources/sounds/right.mp3'), false, 1);\r\n                    }\r\n\r\n                    this.score ++;\r\n                    this.scoreLable.string = this.score;\r\n    \r\n                    dest_x = this.vertical_roadNode.x;\r\n                    dest_y = this.vertical_roadNode.y\r\n                    this.vertical_roadNode.setPosition(this.createPosition());\r\n                    offset_x = this.horizontal_roadNode.x - dest_x;\r\n                    offset_y = this.horizontal_roadNode.y - dest_y;\r\n    \r\n                    this.carNode.setPosition(cc.p(dest_x + 71 + 87, this.horizontal_roadNode.y));\r\n                    this.carNode.rotation = 90;\r\n                    this.car_direction = 1;\r\n    \r\n                    this.horizontal_roadNode.runAction(cc.moveTo(0.5, dest_x, dest_y));\r\n                    this.vertical_roadNode.runAction(cc.moveTo(0.5, this.vertical_roadNode.x - offset_x, this.vertical_roadNode.y - offset_y));\r\n                    this.carNode.runAction(cc.moveTo(0.5, this.carNode.x - offset_x, this.carNode.y - offset_y));\r\n                }\r\n\r\n                \r\n            } else {///horizontal road\r\n\r\n                if(Math.abs(this.carNode.x - this.vertical_roadNode.x) > 50) {\r\n                    if (CHD.getSoundStatus()) {\r\n                        cc.audioEngine.play(cc.url.raw('resources/sounds/wrong.mp3'), false, 1);\r\n                    }\r\n                    this.isGameOver = true;\r\n\r\n                    // this.carNode.stopAllActions();\r\n                    \r\n                    var bubble = cc.instantiate(this.bubble);\r\n                    bubble.setPosition(this.carNode.x, this.carNode.y + 71 + 50);\r\n                    bubble.parent = this.node;\r\n                    bubble.scale = 0.3;\r\n                    bubble.runAction(cc.sequence(cc.scaleTo(0.5, 0.5), cc.removeSelf()));\r\n\r\n                    this.carNode.runAction(cc.moveBy(0.5, 0, 71 + 100));\r\n                    this.carNode.runAction(cc.rotateBy(0.5, 180));\r\n                    this.carNode.runAction(cc.sequence(cc.scaleTo(0.5, 0.1), cc.callFunc(this.gameOver, this)));\r\n                } else {\r\n                    if (CHD.getSoundStatus()) {\r\n                        cc.audioEngine.play(cc.url.raw('resources/sounds/right.mp3'), false, 1);\r\n                    }\r\n\r\n                    this.score ++;\r\n                    this.scoreLable.string = this.score;\r\n    \r\n                    dest_x = this.horizontal_roadNode.x;\r\n                    dest_y = this.horizontal_roadNode.y;\r\n                    this.horizontal_roadNode.setPosition(this.createPosition());\r\n                    offset_x = this.vertical_roadNode.x - dest_x;\r\n                    offset_y = this.vertical_roadNode.y - dest_y;\r\n    \r\n                    this.carNode.setPosition(cc.p(this.vertical_roadNode.x, dest_y + 71 + 87));\r\n                    this.carNode.rotation = 0;\r\n                    this.car_direction = 1;\r\n                    if(this.first_time) {\r\n                        this.first_time = false;\r\n                    } else {\r\n                        this.horizontal_roadNode.runAction(cc.moveTo(0.5, this.horizontal_roadNode.x - offset_x, this.horizontal_roadNode.y - offset_y));\r\n                        this.vertical_roadNode.runAction(cc.moveTo(0.5, dest_x, dest_y));\r\n                        this.carNode.runAction(cc.moveTo(0.5, this.carNode.x - offset_x, this.carNode.y - offset_y));\r\n                    }\r\n                }\r\n                \r\n            }\r\n\r\n\r\n            if(this.direction == 0)\r\n                this.direction = 1;\r\n            else if(this.direction == 1) this.direction = 0;\r\n            \r\n\r\n        }, this),\r\n\r\n       \r\n        this.isloadSoundOn = true;\r\n        if (!CHD.getSoundStatus()) {\r\n            this.soundBtn.getComponent(cc.Sprite).spriteFrame = new cc.SpriteFrame(this.soundOffTexture);\r\n            // cc.audioEngine.pauseAll();\r\n        } else {\r\n            cc.audioEngine.play(cc.url.raw('resources/sounds/HappyLevel.mp3'), true, 1);\r\n            this.isloadSoundOn = false;\r\n        }\r\n\r\n        this.soundBtn.on('touchstart', function(){\r\n            let isSound = CHD.getSoundStatus();\r\n            isSound = !isSound;\r\n            if (this.isloadSoundOn) {\r\n                this.isloadSoundOn = false;\r\n                cc.audioEngine.play(cc.url.raw('resources/sounds/HappyLevel.mp3'), true, 1);                \r\n            }\r\n            if (isSound) {\r\n                this.soundBtn.getComponent(cc.Sprite).spriteFrame = new cc.SpriteFrame(this.soundOnTexture);\r\n                cc.audioEngine.resumeAll();\r\n            } else {\r\n                this.soundBtn.getComponent(cc.Sprite).spriteFrame = new cc.SpriteFrame(this.soundOffTexture);\r\n                cc.audioEngine.pauseAll();\r\n            }\r\n            CHD.setSoundStatus(isSound);\r\n        }, this);\r\n\r\n        this.node.on('touchstart', function(){}, this);\r\n    },\r\n\r\n    init() {\r\n        this.score = 0;\r\n        this.isGameOver = false;\r\n        this.scoreLable.string = this.score;\r\n        this.isComplex = false;\r\n       \r\n        ////////////////////////////////////////////\r\n        this.first_time = true;\r\n\r\n        this.delta_backround = 0;\r\n        this.delta_car = 0;\r\n        this.direction = 0;   //0 : car moved in horizontal road, 1: car moved in vertical road\r\n        this.horizontal_road_x = 0;\r\n        this.horizontal_road_y = -420,\r\n        this.vertical_road_x = 0;\r\n        this.vertical_road_y = 71;\r\n\r\n        this.horizontal_roadNode.setPosition(this.horizontal_road_x, this.horizontal_road_y);\r\n        this.vertical_roadNode.setPosition(this.vertical_road_x, this.vertical_road_y);\r\n\r\n        this.roadpos_x = 0;\r\n        this.roadpos_y = 0;\r\n\r\n        this.carNode.rotation = 90;\r\n        this.carNode.setPosition(cc.p(0, -420));\r\n        this.carNode.scale = 0.8;\r\n\r\n\r\n        this.car_direction = 1;// 1: right, up side, -1: left, down side\r\n\r\n        if (CHD.getSoundStatus()) {\r\n            cc.audioEngine.pauseAll();\r\n            cc.audioEngine.play(cc.url.raw('resources/sounds/HappyLevel.mp3'), true, 1);\r\n        }\r\n\r\n    },\r\n\r\n    runTimeAction() {\r\n        this.timeNode.scale = 1;\r\n        this.timeNode.stopAllActions();\r\n        let s = cc.scaleTo(3, 0, 1);\r\n        this.timeNode.runAction(cc.sequence(s, cc.callFunc(this.gameOver, this)));\r\n    },\r\n\r\n    gameOver() {\r\n\r\n        this.node.active = false;\r\n        this.gameOverNode.active = true;\r\n        this.gameOverNode.getComponent('gameOver').setScore(this.score);\r\n    }\r\n});\r\n"]}